ğŸ“ FILE 0 â€” PURPOSE OF THIS PORTAL
You are designing a WEB-BASED TEST PORTAL for HAJRI Engine.

This portal is NOT a production app.
This portal is NOT admin panel.

This portal exists ONLY to:
- Mimic the mobile app behavior
- Manually test engine logic
- Visualize computed data
- Debug edge cases

The portal must strictly follow the same rules as the mobile app.
No shortcuts.
No privileged access.

ğŸ“ FILE 1 â€” PORTAL ROLE & BOUNDARIES
This portal acts as a "Headless UI Client".

It must:
- Authenticate like the mobile app
- Call the same engine APIs
- Respect snapshot locks
- Never bypass engine rules

It must NOT:
- Directly modify database tables
- Skip snapshot confirmation
- Edit derived tables
- Access admin-only endpoints

ğŸ“ FILE 2 â€” TECH STACK (TEST-ONLY, SIMPLE)
Frontend:
- Simple web framework (Next.js / React / Vue OR plain HTML)
- No fancy UI libraries required
- Focus on visibility, not beauty

Backend:
- NONE (frontend talks directly to HAJRI Engine APIs)

Auth:
- Supabase Auth (same JWT as app)

This portal is disposable.
Correctness > polish.

ğŸ“ FILE 3 â€” USER AUTH FLOW (SAME AS APP)
1. User logs in using Supabase Auth
2. JWT token is stored in browser
3. All API calls use Bearer token
4. No session logic in portal


If user is not authenticated â†’ block entire portal.

ğŸ“ FILE 4 â€” FIRST-TIME USER FLOW (MANDATORY)
If user has NO active academic context:

Portal must force:
- Branch selection
- Semester selection
- Batch selection
- Elective subject selection

These selections are:
- Saved via engine/context API
- Locked after confirmation

User cannot proceed until this is done.


This must behave identically to mobile app onboarding.

ğŸ“ FILE 5 â€” DASHBOARD LAYOUT (APP MIMIC)
After onboarding, show dashboard with sections:

1. Academic Context (read-only)
   - Branch
   - Semester
   - Batch
   - Electives

2. Timetable Viewer
   - Loaded from engine
   - Read-only
   - Shows daily schedule

3. Subject List
   - Subject code
   - Subject name
   - Faculty name
   - Lecture/Lab type

4. Attendance Summary
   - Current percentage
   - Subject-wise breakdown

5. Predictions
   - Must attend
   - Can bunk


No compute happens here. Read-only views.

ğŸ“ FILE 6 â€” OCR TEST FLOW (CRITICAL)
OCR testing must mimic mobile app exactly.

Flow:
1. User uploads screenshot file
2. Portal sends file to OCR service
3. Portal waits (loading animation)
4. OCR returns JSON:
   - subject code
   - subject name
   - present
   - total
   - percentage

5. Portal renders EDITABLE TABLE
6. User can:
   - Correct numbers
   - Remove subjects
   - Fix mismatches

7. User clicks CONFIRM
8. Portal sends confirmed JSON to:
   POST /snapshots/confirm


Portal must NOT auto-save OCR output.

ğŸ“ FILE 7 â€” SNAPSHOT VISIBILITY & LOCKING
After snapshot confirmation:

Portal must:
- Show snapshot timestamp
- Show "Attendance synced on <date>"
- Disable manual edits BEFORE snapshot date

If user attempts to edit past data:
- Show policy message
- Suggest uploading new OCR snapshot


No silent failures.

ğŸ“ FILE 8 â€” MANUAL DAILY TRACKING (APP MIMIC)
Portal must allow manual attendance only for:

- Dates AFTER latest snapshot
- Valid timetable days only

UI:
- Checkbox per subject for "attended today"
- Date selector (future disabled)
- Submit button

On submit:
- POST /attendance/manual
- Engine recomputes


Manual entries before snapshot must be blocked.

ğŸ“ FILE 9 â€” TIMETABLE & CALENDAR VIEW
Portal must visualize:

- Weekly timetable (read-only)
- Highlight holidays & off days
- Disable manual tracking on non-teaching days

Timetable is loaded from:
GET /timetable/current


This validates engine-calendar integration.

ğŸ“ FILE 10 â€” ENGINE RESPONSE VISUALIZATION
Portal must clearly display:

- attendance_summary
- attendance_predictions

Must include:
- Raw numbers
- Percentages
- Remaining classes
- Warnings (if any)

This helps validate engine math.

ğŸ“ FILE 11 â€” DEBUG / TEST UTILITIES (OPTIONAL BUT USEFUL)
Optional test tools:
- "Force recompute" button (debug only)
- Snapshot history viewer (read-only)
- Warning / anomaly log viewer

These must call engine APIs.
No direct DB access allowed.

ğŸ“ FILE 12 â€” ERROR & POLICY DISPLAY
All engine rejections must be shown clearly:

Examples:
- "Cannot edit attendance before snapshot"
- "Manual entry exceeds timetable capacity"
- "Snapshot missing subject"

No raw stack traces.
No silent ignores.

ğŸ“ FILE 13 â€” WHAT THIS PORTAL PROVES
If this portal works correctly:

- Engine logic is correct
- Snapshot locking is correct
- OCR integration is correct
- Manual tracking is correct
- Predictions are correct
- App integration will be trivial


This portal is your ground truth tester.

ğŸ“ FILE 14 â€” TEST CASES THIS PORTAL MUST SUPPORT
- First-time OCR import
- Missing 10â€“15 days â†’ OCR resync
- Snapshot â†’ manual â†’ snapshot
- Holiday between snapshots
- Attempted backfill (must fail)
- Semester end (read-only state)


If any fail â†’ engine or rules are broken.

ğŸ“ FILE 15 â€” FINAL GUARANTEE
This portal must NEVER:
- Bypass engine rules
- Mutate admin data
- Modify snapshots
- Edit derived tables

It exists only to simulate the app and test correctness.